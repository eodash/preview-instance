function Q(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function He(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ae(t){let e,n,i;t.length!==2?(e=Q,n=(o,f)=>Q(t(o),f),i=(o,f)=>t(o)-f):(e=t===Q||t===He?t:De,n=t,i=t);function s(o,f,h=0,l=o.length){if(h<l){if(e(f,f)!==0)return l;do{const u=h+l>>>1;n(o[u],f)<0?h=u+1:l=u}while(h<l)}return h}function r(o,f,h=0,l=o.length){if(h<l){if(e(f,f)!==0)return l;do{const u=h+l>>>1;n(o[u],f)<=0?h=u+1:l=u}while(h<l)}return h}function a(o,f,h=0,l=o.length){const u=s(o,f,h,l-1);return u>h&&i(o[u-1],f)>-i(o[u],f)?u-1:u}return{left:s,center:a,right:r}}function De(){return 0}function ze(t){return t===null?NaN:+t}function*ri(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const oe=ae(Q),Et=oe.right,si=oe.left;ae(ze).center;class qt extends Map{constructor(e,n=ue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(vt(this,e))}has(e){return super.has(vt(this,e))}set(e,n){return super.set(he(this,e),n)}delete(e){return super.delete(fe(this,e))}}class ai extends Set{constructor(e,n=ue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(vt(this,e))}add(e){return super.add(he(this,e))}delete(e){return super.delete(fe(this,e))}}function vt({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function he({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function fe({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function ue(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Be=Math.sqrt(50),Ve=Math.sqrt(10),We=Math.sqrt(2);function tt(t,e,n){const i=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(i)),r=i/Math.pow(10,s),a=r>=Be?10:r>=Ve?5:r>=We?2:1;let o,f,h;return s<0?(h=Math.pow(10,-s)/a,o=Math.round(t*h),f=Math.round(e*h),o/h<t&&++o,f/h>e&&--f,h=-h):(h=Math.pow(10,s)*a,o=Math.round(t/h),f=Math.round(e/h),o*h<t&&++o,f*h>e&&--f),f<o&&.5<=n&&n<2?tt(t,e,n*2):[o,f,h]}function Nt(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[s,r,a]=i?tt(e,t,n):tt(t,e,n);if(!(r>=s))return[];const o=r-s+1,f=new Array(o);if(i)if(a<0)for(let h=0;h<o;++h)f[h]=(r-h)/-a;else for(let h=0;h<o;++h)f[h]=(r-h)*a;else if(a<0)for(let h=0;h<o;++h)f[h]=(s+h)/-a;else for(let h=0;h<o;++h)f[h]=(s+h)*a;return f}function At(t,e,n){return e=+e,t=+t,n=+n,tt(t,e,n)[2]}function Ge(t,e,n){e=+e,t=+t,n=+n;const i=e<t,s=i?At(e,t,n):At(t,e,n);return(i?-1:1)*(s<0?1/-s:s)}function I(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ht(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Tt=Symbol("implicit");function Ue(){var t=new qt,e=[],n=[],i=Tt;function s(r){let a=t.get(r);if(a===void 0){if(i!==Tt)return i;t.set(r,a=e.push(r)-1)}return n[a%n.length]}return s.domain=function(r){if(!arguments.length)return e.slice();e=[],t=new qt;for(const a of r)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(r){return arguments.length?(n=Array.from(r),s):n.slice()},s.unknown=function(r){return arguments.length?(i=r,s):i},s.copy=function(){return Ue(e,n).unknown(i)},I.apply(s,arguments),s}function V(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ft(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function P(){}var H=.7,et=1/H,S="\\s*([+-]?\\d+)\\s*",D="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xe=/^#([0-9a-f]{3,8})$/,Je=new RegExp(`^rgb\\(${S},${S},${S}\\)$`),Ye=new RegExp(`^rgb\\(${N},${N},${N}\\)$`),Ze=new RegExp(`^rgba\\(${S},${S},${S},${D}\\)$`),Ke=new RegExp(`^rgba\\(${N},${N},${N},${D}\\)$`),Qe=new RegExp(`^hsl\\(${D},${N},${N}\\)$`),tn=new RegExp(`^hsla\\(${D},${N},${N},${D}\\)$`),Rt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V(P,z,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Lt,formatHex:Lt,formatHex8:en,formatHsl:nn,formatRgb:Ht,toString:Ht});function Lt(){return this.rgb().formatHex()}function en(){return this.rgb().formatHex8()}function nn(){return ce(this).formatHsl()}function Ht(){return this.rgb().formatRgb()}function z(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Dt(e):n===3?new m(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Y(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Y(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Je.exec(t))?new m(e[1],e[2],e[3],1):(e=Ye.exec(t))?new m(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ze.exec(t))?Y(e[1],e[2],e[3],e[4]):(e=Ke.exec(t))?Y(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qe.exec(t))?Vt(e[1],e[2]/100,e[3]/100,1):(e=tn.exec(t))?Vt(e[1],e[2]/100,e[3]/100,e[4]):Rt.hasOwnProperty(t)?Dt(Rt[t]):t==="transparent"?new m(NaN,NaN,NaN,0):null}function Dt(t){return new m(t>>16&255,t>>8&255,t&255,1)}function Y(t,e,n,i){return i<=0&&(t=e=n=NaN),new m(t,e,n,i)}function le(t){return t instanceof P||(t=z(t)),t?(t=t.rgb(),new m(t.r,t.g,t.b,t.opacity)):new m}function nt(t,e,n,i){return arguments.length===1?le(t):new m(t,e,n,i??1)}function m(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}V(m,nt,ft(P,{brighter(t){return t=t==null?et:Math.pow(et,t),new m(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?H:Math.pow(H,t),new m(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new m(O(this.r),O(this.g),O(this.b),it(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zt,formatHex:zt,formatHex8:rn,formatRgb:Bt,toString:Bt}));function zt(){return`#${C(this.r)}${C(this.g)}${C(this.b)}`}function rn(){return`#${C(this.r)}${C(this.g)}${C(this.b)}${C((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bt(){const t=it(this.opacity);return`${t===1?"rgb(":"rgba("}${O(this.r)}, ${O(this.g)}, ${O(this.b)}${t===1?")":`, ${t})`}`}function it(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function O(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function C(t){return t=O(t),(t<16?"0":"")+t.toString(16)}function Vt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new v(t,e,n,i)}function ce(t){if(t instanceof v)return new v(t.h,t.s,t.l,t.opacity);if(t instanceof P||(t=z(t)),!t)return new v;if(t instanceof v)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),r=Math.max(e,n,i),a=NaN,o=r-s,f=(r+s)/2;return o?(e===r?a=(n-i)/o+(n<i)*6:n===r?a=(i-e)/o+2:a=(e-n)/o+4,o/=f<.5?r+s:2-r-s,a*=60):o=f>0&&f<1?0:a,new v(a,o,f,t.opacity)}function sn(t,e,n,i){return arguments.length===1?ce(t):new v(t,e,n,i??1)}function v(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}V(v,sn,ft(P,{brighter(t){return t=t==null?et:Math.pow(et,t),new v(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?H:Math.pow(H,t),new v(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new m(mt(t>=240?t-240:t+120,s,i),mt(t,s,i),mt(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new v(Wt(this.h),Z(this.s),Z(this.l),it(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=it(this.opacity);return`${t===1?"hsl(":"hsla("}${Wt(this.h)}, ${Z(this.s)*100}%, ${Z(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wt(t){return t=(t||0)%360,t<0?t+360:t}function Z(t){return Math.max(0,Math.min(1,t||0))}function mt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const an=Math.PI/180,on=180/Math.PI,rt=18,de=.96422,pe=1,ge=.82521,me=4/29,q=6/29,xe=3*q*q,hn=q*q*q;function ye(t){if(t instanceof A)return new A(t.l,t.a,t.b,t.opacity);if(t instanceof _)return be(t);t instanceof m||(t=le(t));var e=wt(t.r),n=wt(t.g),i=wt(t.b),s=xt((.2225045*e+.7168786*n+.0606169*i)/pe),r,a;return e===n&&n===i?r=a=s:(r=xt((.4360747*e+.3850649*n+.1430804*i)/de),a=xt((.0139322*e+.0971045*n+.7141733*i)/ge)),new A(116*s-16,500*(r-s),200*(s-a),t.opacity)}function fn(t,e,n,i){return arguments.length===1?ye(t):new A(t,e,n,i??1)}function A(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}V(A,fn,ft(P,{brighter(t){return new A(this.l+rt*(t??1),this.a,this.b,this.opacity)},darker(t){return new A(this.l-rt*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=de*yt(e),t=pe*yt(t),n=ge*yt(n),new m(bt(3.1338561*e-1.6168667*t-.4906146*n),bt(-.9787684*e+1.9161415*t+.033454*n),bt(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function xt(t){return t>hn?Math.pow(t,1/3):t/xe+me}function yt(t){return t>q?t*t*t:xe*(t-me)}function bt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function wt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function un(t){if(t instanceof _)return new _(t.h,t.c,t.l,t.opacity);if(t instanceof A||(t=ye(t)),t.a===0&&t.b===0)return new _(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*on;return new _(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function jt(t,e,n,i){return arguments.length===1?un(t):new _(t,e,n,i??1)}function _(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function be(t){if(isNaN(t.h))return new A(t.l,0,0,t.opacity);var e=t.h*an;return new A(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}V(_,jt,ft(P,{brighter(t){return new _(this.h,this.c,this.l+rt*(t??1),this.opacity)},darker(t){return new _(this.h,this.c,this.l-rt*(t??1),this.opacity)},rgb(){return be(this).rgb()}}));function we(t,e,n,i,s){var r=t*t,a=r*t;return((1-3*t+3*r-a)*e+(4-6*r+3*a)*n+(1+3*t+3*r-3*a)*i+a*s)/6}function ln(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),s=t[i],r=t[i+1],a=i>0?t[i-1]:2*s-r,o=i<e-1?t[i+2]:2*r-s;return we((n-i/e)*e,a,s,r,o)}}function cn(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),s=t[(i+e-1)%e],r=t[i%e],a=t[(i+1)%e],o=t[(i+2)%e];return we((n-i/e)*e,s,r,a,o)}}const ut=t=>()=>t;function ke(t,e){return function(n){return t+n*e}}function dn(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function pn(t,e){var n=e-t;return n?ke(t,n>180||n<-180?n-360*Math.round(n/360):n):ut(isNaN(t)?e:t)}function gn(t){return(t=+t)==1?T:function(e,n){return n-e?dn(e,n,t):ut(isNaN(e)?n:e)}}function T(t,e){var n=e-t;return n?ke(t,n):ut(isNaN(t)?e:t)}const Gt=function t(e){var n=gn(e);function i(s,r){var a=n((s=nt(s)).r,(r=nt(r)).r),o=n(s.g,r.g),f=n(s.b,r.b),h=T(s.opacity,r.opacity);return function(l){return s.r=a(l),s.g=o(l),s.b=f(l),s.opacity=h(l),s+""}}return i.gamma=t,i}(1);function Me(t){return function(e){var n=e.length,i=new Array(n),s=new Array(n),r=new Array(n),a,o;for(a=0;a<n;++a)o=nt(e[a]),i[a]=o.r||0,s[a]=o.g||0,r[a]=o.b||0;return i=t(i),s=t(s),r=t(r),o.opacity=1,function(f){return o.r=i(f),o.g=s(f),o.b=r(f),o+""}}}var oi=Me(ln),hi=Me(cn);function ve(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),s;return function(r){for(s=0;s<n;++s)i[s]=t[s]*(1-r)+e[s]*r;return i}}function Ne(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fi(t,e){return(Ne(e)?ve:Ae)(t,e)}function Ae(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,s=new Array(i),r=new Array(n),a;for(a=0;a<i;++a)s[a]=W(t[a],e[a]);for(;a<n;++a)r[a]=e[a];return function(o){for(a=0;a<i;++a)r[a]=s[a](o);return r}}function mn(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function st(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xn(t,e){var n={},i={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=W(t[s],e[s]):i[s]=e[s];return function(r){for(s in n)i[s]=n[s](r);return i}}var _t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kt=new RegExp(_t.source,"g");function yn(t){return function(){return t}}function bn(t){return function(e){return t(e)+""}}function wn(t,e){var n=_t.lastIndex=kt.lastIndex=0,i,s,r,a=-1,o=[],f=[];for(t=t+"",e=e+"";(i=_t.exec(t))&&(s=kt.exec(e));)(r=s.index)>n&&(r=e.slice(n,r),o[a]?o[a]+=r:o[++a]=r),(i=i[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,f.push({i:a,x:st(i,s)})),n=kt.lastIndex;return n<e.length&&(r=e.slice(n),o[a]?o[a]+=r:o[++a]=r),o.length<2?f[0]?bn(f[0].x):yn(e):(e=f.length,function(h){for(var l=0,u;l<e;++l)o[(u=f[l]).i]=u.x(h);return o.join("")})}function W(t,e){var n=typeof e,i;return e==null||n==="boolean"?ut(e):(n==="number"?st:n==="string"?(i=z(e))?(e=i,Gt):wn:e instanceof z?Gt:e instanceof Date?mn:Ne(e)?ve:Array.isArray(e)?Ae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xn:st)(t,e)}function je(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _e(t){return function(e,n){var i=t((e=jt(e)).h,(n=jt(n)).h),s=T(e.c,n.c),r=T(e.l,n.l),a=T(e.opacity,n.opacity);return function(o){return e.h=i(o),e.c=s(o),e.l=r(o),e.opacity=a(o),e+""}}}const ui=_e(pn);var li=_e(T);function ci(t,e){e===void 0&&(e=t,t=W);for(var n=0,i=e.length-1,s=e[0],r=new Array(i<0?0:i);n<i;)r[n]=t(s,s=e[++n]);return function(a){var o=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return r[o](a-o)}}function kn(t){return function(){return t}}function Mn(t){return+t}var Ut=[0,1];function k(t){return t}function $t(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:kn(isNaN(e)?NaN:.5)}function vn(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Nn(t,e,n){var i=t[0],s=t[1],r=e[0],a=e[1];return s<i?(i=$t(s,i),r=n(a,r)):(i=$t(i,s),r=n(r,a)),function(o){return r(i(o))}}function An(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),r=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)s[a]=$t(t[a],t[a+1]),r[a]=n(e[a],e[a+1]);return function(o){var f=Et(t,o,1,i)-1;return r[f](s[f](o))}}function lt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ct(){var t=Ut,e=Ut,n=W,i,s,r,a=k,o,f,h;function l(){var c=Math.min(t.length,e.length);return a!==k&&(a=vn(t[0],t[c-1])),o=c>2?An:Nn,f=h=null,u}function u(c){return c==null||isNaN(c=+c)?r:(f||(f=o(t.map(i),e,n)))(i(a(c)))}return u.invert=function(c){return a(s((h||(h=o(e,t.map(i),st)))(c)))},u.domain=function(c){return arguments.length?(t=Array.from(c,Mn),l()):t.slice()},u.range=function(c){return arguments.length?(e=Array.from(c),l()):e.slice()},u.rangeRound=function(c){return e=Array.from(c),n=je,l()},u.clamp=function(c){return arguments.length?(a=c?!0:k,l()):a!==k},u.interpolate=function(c){return arguments.length?(n=c,l()):n},u.unknown=function(c){return arguments.length?(r=c,u):r},function(c,g){return i=c,s=g,l()}}function jn(){return ct()(k,k)}function _n(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function at(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function R(t){return t=at(Math.abs(t)),t?t[1]:NaN}function $n(t,e){return function(n,i){for(var s=n.length,r=[],a=0,o=t[0],f=0;s>0&&o>0&&(f+o+1>i&&(o=Math.max(1,i-f)),r.push(n.substring(s-=o,s+o)),!((f+=o+1)>i));)o=t[a=(a+1)%t.length];return r.reverse().join(e)}}function En(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Cn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function B(t){if(!(e=Cn.exec(t)))throw new Error("invalid format: "+t);var e;return new Ct({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}B.prototype=Ct.prototype;function Ct(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ct.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function On(t){t:for(var e=t.length,n=1,i=-1,s;n<e;++n)switch(t[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var $e;function In(t,e){var n=at(t,e);if(!n)return t+"";var i=n[0],s=n[1],r=s-($e=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return r===a?i:r>a?i+new Array(r-a+1).join("0"):r>0?i.slice(0,r)+"."+i.slice(r):"0."+new Array(1-r).join("0")+at(t,Math.max(0,e+r-1))[0]}function Xt(t,e){var n=at(t,e);if(!n)return t+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const Jt={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_n,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Xt(t*100,e),r:Xt,s:In,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Yt(t){return t}var Zt=Array.prototype.map,Kt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pn(t){var e=t.grouping===void 0||t.thousands===void 0?Yt:$n(Zt.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",r=t.numerals===void 0?Yt:En(Zt.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function h(u){u=B(u);var c=u.fill,g=u.align,p=u.sign,x=u.symbol,M=u.zero,y=u.width,gt=u.comma,$=u.precision,It=u.trim,b=u.type;b==="n"?(gt=!0,b="g"):Jt[b]||($===void 0&&($=12),It=!0,b="g"),(M||c==="0"&&g==="=")&&(M=!0,c="0",g="=");var Te=x==="$"?n:x==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",Re=x==="$"?i:/[%p]/.test(b)?a:"",Pt=Jt[b],Le=/[defgprs%]/.test(b);$=$===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function Ft(d){var E=Te,w=Re,F,St,U;if(b==="c")w=Pt(d)+w,d="";else{d=+d;var X=d<0||1/d<0;if(d=isNaN(d)?f:Pt(Math.abs(d),$),It&&(d=On(d)),X&&+d==0&&p!=="+"&&(X=!1),E=(X?p==="("?p:o:p==="-"||p==="("?"":p)+E,w=(b==="s"?Kt[8+$e/3]:"")+w+(X&&p==="("?")":""),Le){for(F=-1,St=d.length;++F<St;)if(U=d.charCodeAt(F),48>U||U>57){w=(U===46?s+d.slice(F+1):d.slice(F))+w,d=d.slice(0,F);break}}}gt&&!M&&(d=e(d,1/0));var J=E.length+d.length+w.length,j=J<y?new Array(y-J+1).join(c):"";switch(gt&&M&&(d=e(j+d,j.length?y-w.length:1/0),j=""),g){case"<":d=E+d+w+j;break;case"=":d=E+j+d+w;break;case"^":d=j.slice(0,J=j.length>>1)+E+d+w+j.slice(J);break;default:d=j+E+d+w;break}return r(d)}return Ft.toString=function(){return u+""},Ft}function l(u,c){var g=h((u=B(u),u.type="f",u)),p=Math.max(-8,Math.min(8,Math.floor(R(c)/3)))*3,x=Math.pow(10,-p),M=Kt[8+p/3];return function(y){return g(x*y)+M}}return{format:h,formatPrefix:l}}var K,Ot,Ee;Fn({thousands:",",grouping:[3],currency:["$",""]});function Fn(t){return K=Pn(t),Ot=K.format,Ee=K.formatPrefix,K}function Sn(t){return Math.max(0,-R(Math.abs(t)))}function qn(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(R(e)/3)))*3-R(Math.abs(t)))}function Tn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,R(e)-R(t))+1}function Rn(t,e,n,i){var s=Ge(t,e,n),r;switch(i=B(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(r=qn(s,a))&&(i.precision=r),Ee(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(r=Tn(s,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=r-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(r=Sn(s))&&(i.precision=r-(i.type==="%")*2);break}}return Ot(i)}function G(t){var e=t.domain;return t.ticks=function(n){var i=e();return Nt(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var s=e();return Rn(s[0],s[s.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),s=0,r=i.length-1,a=i[s],o=i[r],f,h,l=10;for(o<a&&(h=a,a=o,o=h,h=s,s=r,r=h);l-- >0;){if(h=At(a,o,n),h===f)return i[s]=a,i[r]=o,e(i);if(h>0)a=Math.floor(a/h)*h,o=Math.ceil(o/h)*h;else if(h<0)a=Math.ceil(a*h)/h,o=Math.floor(o*h)/h;else break;f=h}return t},t}function Ln(){var t=jn();return t.copy=function(){return lt(t,Ln())},I.apply(t,arguments),G(t)}function Hn(t,e){t=t.slice();var n=0,i=t.length-1,s=t[n],r=t[i],a;return r<s&&(a=n,n=i,i=a,a=s,s=r,r=a),t[n]=e.floor(s),t[i]=e.ceil(r),t}function Qt(t){return Math.log(t)}function te(t){return Math.exp(t)}function Dn(t){return-Math.log(-t)}function zn(t){return-Math.exp(-t)}function Bn(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vn(t){return t===10?Bn:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Wn(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ee(t){return(e,n)=>-t(-e,n)}function Ce(t){const e=t(Qt,te),n=e.domain;let i=10,s,r;function a(){return s=Wn(i),r=Vn(i),n()[0]<0?(s=ee(s),r=ee(r),t(Dn,zn)):t(Qt,te),e}return e.base=function(o){return arguments.length?(i=+o,a()):i},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const f=n();let h=f[0],l=f[f.length-1];const u=l<h;u&&([h,l]=[l,h]);let c=s(h),g=s(l),p,x;const M=o==null?10:+o;let y=[];if(!(i%1)&&g-c<M){if(c=Math.floor(c),g=Math.ceil(g),h>0){for(;c<=g;++c)for(p=1;p<i;++p)if(x=c<0?p/r(-c):p*r(c),!(x<h)){if(x>l)break;y.push(x)}}else for(;c<=g;++c)for(p=i-1;p>=1;--p)if(x=c>0?p/r(-c):p*r(c),!(x<h)){if(x>l)break;y.push(x)}y.length*2<M&&(y=Nt(h,l,M))}else y=Nt(c,g,Math.min(g-c,M)).map(r);return u?y.reverse():y},e.tickFormat=(o,f)=>{if(o==null&&(o=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=B(f)).precision==null&&(f.trim=!0),f=Ot(f)),o===1/0)return f;const h=Math.max(1,i*o/e.ticks().length);return l=>{let u=l/r(Math.round(s(l)));return u*i<i-.5&&(u*=i),u<=h?f(l):""}},e.nice=()=>n(Hn(n(),{floor:o=>r(Math.floor(s(o))),ceil:o=>r(Math.ceil(s(o)))})),e}function Gn(){const t=Ce(ct()).domain([1,10]);return t.copy=()=>lt(t,Gn()).base(t.base()),I.apply(t,arguments),t}function ne(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ie(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Oe(t){var e=1,n=t(ne(e),ie(e));return n.constant=function(i){return arguments.length?t(ne(e=+i),ie(e)):e},G(n)}function Un(){var t=Oe(ct());return t.copy=function(){return lt(t,Un()).constant(t.constant())},I.apply(t,arguments)}function re(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jn(t){return t<0?-t*t:t*t}function Ie(t){var e=t(k,k),n=1;function i(){return n===1?t(k,k):n===.5?t(Xn,Jn):t(re(n),re(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,i()):n},G(e)}function Pe(){var t=Ie(ct());return t.copy=function(){return lt(t,Pe()).exponent(t.exponent())},I.apply(t,arguments),t}function di(){return Pe.apply(null,arguments).exponent(.5)}function Yn(){var t=0,e=1,n=1,i=[.5],s=[0,1],r;function a(f){return f!=null&&f<=f?s[Et(i,f,0,n)]:r}function o(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*e-(f-n)*t)/(n+1);return a}return a.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,o()):[t,e]},a.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,o()):s.slice()},a.invertExtent=function(f){var h=s.indexOf(f);return h<0?[NaN,NaN]:h<1?[t,i[0]]:h>=n?[i[n-1],e]:[i[h-1],i[h]]},a.unknown=function(f){return arguments.length&&(r=f),a},a.thresholds=function(){return i.slice()},a.copy=function(){return Yn().domain([t,e]).range(s).unknown(r)},I.apply(G(a),arguments)}function Zn(){var t=[.5],e=[0,1],n,i=1;function s(r){return r!=null&&r<=r?e[Et(t,r,0,i)]:n}return s.domain=function(r){return arguments.length?(t=Array.from(r),i=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(r){return arguments.length?(e=Array.from(r),i=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(r){var a=e.indexOf(r);return[t[a-1],t[a]]},s.unknown=function(r){return arguments.length?(n=r,s):n},s.copy=function(){return Zn().domain(t).range(e).unknown(n)},I.apply(s,arguments)}function dt(){var t=0,e=1,n,i,s,r,a=k,o=!1,f;function h(u){return u==null||isNaN(u=+u)?f:a(s===0?.5:(u=(r(u)-n)*s,o?Math.max(0,Math.min(1,u)):u))}h.domain=function(u){return arguments.length?([t,e]=u,n=r(t=+t),i=r(e=+e),s=n===i?0:1/(i-n),h):[t,e]},h.clamp=function(u){return arguments.length?(o=!!u,h):o},h.interpolator=function(u){return arguments.length?(a=u,h):a};function l(u){return function(c){var g,p;return arguments.length?([g,p]=c,a=u(g,p),h):[a(0),a(1)]}}return h.range=l(W),h.rangeRound=l(je),h.unknown=function(u){return arguments.length?(f=u,h):f},function(u){return r=u,n=u(t),i=u(e),s=n===i?0:1/(i-n),h}}function pt(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Kn(){var t=G(dt()(k));return t.copy=function(){return pt(t,Kn())},ht.apply(t,arguments)}function Qn(){var t=Ce(dt()).domain([1,10]);return t.copy=function(){return pt(t,Qn()).base(t.base())},ht.apply(t,arguments)}function ti(){var t=Oe(dt());return t.copy=function(){return pt(t,ti()).constant(t.constant())},ht.apply(t,arguments)}function Fe(){var t=Ie(dt());return t.copy=function(){return pt(t,Fe()).exponent(t.exponent())},ht.apply(t,arguments)}function pi(){return Fe.apply(null,arguments).exponent(.5)}function Se(t){return!(t===null||typeof t!="object"||t.nodeType||t===t.window||t.constructor&&!L(t.constructor.prototype,"isPrototypeOf"))}function qe(t){return Se(t)?ot({},t):Array.isArray(t)?t.map(qe):t}function ot(t,...e){return e.forEach(n=>{n&&Object.keys(n).forEach(i=>{n[i]&&Se(n[i])?(L(t,i)||(t[i]={}),ot(t[i],n[i])):Array.isArray(n[i])?t[i]=qe(n[i]):t[i]=n[i]})}),t}function gi(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function ei(t){return t&&(t.toString()==="[object ShadowRoot]"?t:ei(t.parentNode))}function L(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)}const ni=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function mi(t){if(typeof t>"u"||t===null)return!1;const e=t.match(ni),n=parseFloat(t);return e!==null&&!isNaN(n)&&isFinite(n)}const ii=/^\s*(-|\+)?(\d+)\s*$/;function xi(t){if(typeof t>"u"||t===null)return!1;const e=t.match(ii),n=parseInt(t);return e!==null&&!isNaN(n)&&isFinite(n)}function yi(){let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?n:n&3|8).toString(16)})}function Mt(t){return t&&typeof t=="object"&&!Array.isArray(t)}function se(t,...e){if(!e.length)return t;const n=e.shift();if(Mt(t)&&Mt(n))for(const i in n)Mt(n[i])?(t[i]||Object.assign(t,{[i]:{}}),se(t[i],n[i])):Object.assign(t,{[i]:n[i]});return se(t,...e)}function bi(t,e){return Object.keys(e).forEach(function(n){n in t&&(t[n]=e[n])}),t}class wi{constructor(e,n){this.defaults=n,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=ot({},this.options||{},this.schema.options||{},e.schema.options||{},e),this.enforceConstEnabled=this.options.enforce_const??this.jsoneditor.options.enforce_const,this.formname=this.jsoneditor.options.form_name_root||"root",!e.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=e.path||this.formname,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,this.optInWidget=this.options.opt_in_widget??this.jsoneditor.options.opt_in_widget,e.container&&this.setContainer(e.container),this.registerDependencies()}onChildEditorChange(e,n){this.onChange(!0,!1,n)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(e){this.parent?this.parent.onChildEditorChange(this,e):this.jsoneditor&&this.jsoneditor.onChange(e)}onChange(e,n,i){this.notify(),n||this.watch_listener&&this.watch_listener(),e&&this.change(i)}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const e=this.getTitle()||this.formname;this.input.setAttribute("aria-label",e)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const e=this.options.dependencies;e&&Object.keys(e).forEach(n=>{let i;n.startsWith(this.jsoneditor.root.path)?i=n:(i=this.path.split("."),i[i.length-1]=n,i=i.join(".")),this.jsoneditor.watch(i,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const e=this.container||this.control;if(!e||this.jsoneditor===null)return;const n=this.options.dependencies;if(!n)return;const i=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(n).forEach(r=>{let a;r.startsWith(this.jsoneditor.root.path)?a=r:(a=this.path.split("."),a[a.length-1]=r,a=a.join("."));const f=n[r];this.checkDependency(a,f)}),this.dependenciesFulfilled!==i&&this.notify();let s=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(s="none"),e.tagName==="TD"?Object.keys(e.childNodes).forEach(r=>e.childNodes[r].style.display=s):e.style.display=s}checkDependency(e,n){if(this.path===e||this.jsoneditor===null)return;const i=this.jsoneditor.getEditor(e),s=i?i.getValue():void 0;!i||!i.dependenciesFulfilled||!s?this.dependenciesFulfilled=!1:Array.isArray(n)?this.dependenciesFulfilled=n.some(r=>{if(JSON.stringify(s)===JSON.stringify(r))return!0}):typeof n=="object"?typeof s!="object"?this.dependenciesFulfilled=n===s:Object.keys(n).some(r=>{if(!L(n,r))return!1;if(!L(s,r)||n[r]!==s[r])return this.dependenciesFulfilled=!1,!0}):typeof n=="string"||typeof n=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&s===n:typeof n=="boolean"&&(n?this.dependenciesFulfilled=this.dependenciesFulfilled&&(s||s.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!s||s.length===0))}setContainer(e){this.container=e,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(){let e;this.optInWidget==="switch"?e=this.theme.getOptInSwitch(this.formname):e=this.theme.getOptInCheckbox(this.formname),this.optInCheckbox=e.checkbox,this.optInContainer=e.container,this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const n=this.jsoneditor.options.show_opt_in,i=typeof this.parent.options.show_opt_in<"u",s=i&&this.parent.options.show_opt_in===!0,r=i&&this.parent.options.show_opt_in===!1;(s||!r&&n||!i&&n)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.insertBefore(this.optInContainer,this.header.firstChild),this.optInAppended=!0)}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConstEnabled&&this.schema.const&&this.disable()}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},L(this.schema,"watch")){let e,n,i,s,r;const a=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(o=>{if(e=this.schema.watch[o],Array.isArray(e)){if(e.length<2)return;n=[e[0]].concat(e[1].split("."))}else n=e.split("."),this.theme.closest(this.container,`[data-schemaid="${n[0]}"]`)||n.unshift("#");if(i=n.shift(),i==="#"&&(i=this.jsoneditor.schema.id||this.jsoneditor.root.formname),s=this.theme.closest(this.container,`[data-schemaid="${i}"]`),!s)throw new Error(`Could not find ancestor node with id ${i}`);r=`${s.getAttribute("data-schemapath")}.${n.join(".")}`,a.startsWith(r)&&(this.watchLoop=!0),this.jsoneditor.watch(r,this.watch_listener),this.watched[o]=r})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))}onMove(){}getButton(e,n,i,s=[]){const r=`json-editor-btn-${n}`;this.iconlib?n=this.iconlib.getIcon(n):n=null,e=this.translate(e,s),i=this.translate(i,s),!n&&i&&(e=i,i=null);const a=this.theme.getButton(e,n,i);return a.classList.add(r),a}setButtonText(e,n,i,s,r=[]){return this.iconlib?i=this.iconlib.getIcon(i):i=null,n=this.translate(n,r),s=this.translate(s,r),!i&&s&&(n=s,s=null),this.theme.setButtonText(e,n,i,s)}addLink(e){this.link_holder&&this.link_holder.appendChild(e)}getLink(e){let n,i;const r=(e.mediaType||"application/javascript").split("/")[0],a=this.jsoneditor.compileTemplate(e.href,this.template_engine),o=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine);let f=null;if(e.download&&(f=e.download),f&&f!==!0&&(f=this.jsoneditor.compileTemplate(f,this.template_engine)),r==="image"){n=this.theme.getBlockLinkHolder(),i=document.createElement("a"),i.setAttribute("target","_blank");const h=document.createElement("img");this.theme.createImageLink(n,i,h),this.link_watchers.push(l=>{const u=a(l),c=o(l);i.setAttribute("href",u),i.setAttribute("title",c||u),h.setAttribute("src",u)})}else if(["audio","video"].includes(r)){n=this.theme.getBlockLinkHolder(),i=this.theme.getBlockLink(),i.setAttribute("target","_blank");const h=document.createElement(r);h.setAttribute("controls","controls"),this.theme.createMediaLink(n,i,h),this.link_watchers.push(l=>{const u=a(l),c=o(l);i.setAttribute("href",u),i.textContent=c||u,h.setAttribute("src",u)})}else i=n=this.theme.getBlockLink(),n.setAttribute("target","_blank"),n.textContent=e.rel,n.style.display="none",this.link_watchers.push(h=>{const l=a(h),u=o(h);l&&(n.style.display=""),n.setAttribute("href",l),n.textContent=u||l});return f&&i&&(f===!0?i.setAttribute("download",""):this.link_watchers.push(h=>{i.setAttribute("download",f(h))})),e.class&&e.class.split(" ").forEach(l=>{i.classList.add(l)}),n}refreshWatchedFieldValues(){if(!this.watched_values)return;const e={};let n=!1;return this.watched&&Object.keys(this.watched).forEach(i=>{const s=this.jsoneditor.getEditor(this.watched[i]),r=s?s.getValue():null;this.watched_values[i]!==r&&(n=!0),e[i]=r}),e.self=this.getValue(),this.watched_values.self!==e.self&&(n=!0),this.watched_values=e,n}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const e=this.getHeaderText();if(this.header.children.length){for(let n=0;n<this.header.childNodes.length;n++)if(this.header.childNodes[n].nodeType===3){this.header.childNodes[n].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}}getHeaderText(e){return this.header_text?this.header_text:e?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(e){const n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText}onWatchedFieldChange(){let e;if(this.header_template){e=ot(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(e.properties={},Object.keys(this.editors).forEach(i=>{const s=this.editors[i];if(s.schema&&s.schema.enum&&s.schema.options&&s.schema.options.enum_titles){const r=s.schema.enum.indexOf(s.value),a=s.options.enum_titles[r];e.properties[i]={enumTitle:a}}}));const n=this.header_template(e);n!==this.header_text&&(this.header_text=n,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(let n=0;n<this.link_watchers.length;n++)this.link_watchers[n](e)}}setValue(e){e=this.applyConstFilter(e),this.value=e}applyConstFilter(e){return this.enforceConstEnabled&&typeof this.schema.const<"u"&&(e=this.schema.const),e}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(e=>this.jsoneditor.unwatch(e,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(this.enforceConstEnabled&&this.schema.const)return this.schema.const;if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&typeof e=="object"&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),typeof e=="string"){if(e==="number")return this.isDefaultRequired()?0:void 0;if(e==="boolean")return this.isDefaultRequired()?!1:void 0;if(e==="integer")return this.isDefaultRequired()?0:void 0;if(e==="string")return this.isDefaultRequired()?"":void 0;if(e==="null")return null;if(e==="object")return{};if(e==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(e){const n=[],i={};e.forEach(r=>{r.title&&(i[r.title]=i[r.title]||0,i[r.title]++),r.description&&(i[r.description]=i[r.description]||0,i[r.description]++),r.format&&(i[r.format]=i[r.format]||0,i[r.format]++),r.type&&(i[r.type]=i[r.type]||0,i[r.type]++)}),e.forEach(r=>{let a;typeof r=="string"?a=r:r.title&&i[r.title]<=1?a=r.title:r.format&&i[r.format]<=1?a=r.format:r.type&&i[r.type]<=1?a=r.type:r.description&&i[r.description]<=1?a=r.description:r.title?a=r.title:r.format?a=r.format:r.type?a=r.type:r.description?a=r.description:JSON.stringify(r).length<500?a=JSON.stringify(r):a="type",n.push(a)});const s={};return n.forEach((r,a)=>{s[r]=s[r]||0,s[r]++,i[r]>1&&(n[a]=`${r} ${s[r]}`)}),n}getValidId(e){return e=e===void 0?"":e.toString(),e.replace(/\s+/g,"-")}setInputAttributes(e,n){if(this.schema.options&&this.schema.options.inputAttributes){const i=this.schema.options.inputAttributes,s=["name","type"].concat(e),r=n||this.input;Object.keys(i).forEach(a=>{s.includes(a.toLowerCase())||r.setAttribute(a,i[a])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const e=this.schema.options.containerAttributes,n=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach(i=>{n.includes(i.toLowerCase())||this.container.setAttribute(i,e[i])})}}expandCallbacks(e,n){const i=this.defaults.callbacks[e];return Object.entries(n).forEach(([s,r])=>{r===Object(r)?n[s]=this.expandCallbacks(e,r):typeof r=="string"&&typeof i=="object"&&typeof i[r]=="function"&&(n[s]=i[r].bind(null,this))}),n}showValidationErrors(e){}}export{ae as $,wi as A,et as B,P as C,pn as D,st as E,sn as F,T as G,fn as H,ai as I,W as J,fi as K,ln as L,cn as M,mn as N,li as O,ve as P,xn as Q,m as R,Gt as S,oi as T,hi as U,je as V,wn as W,Mn as X,G as Y,I as Z,Et as _,gi as a,Ge as a0,jn as a1,Hn as a2,lt as a3,k as a4,pt as a5,ht as a6,Ce as a7,Ie as a8,Oe as a9,Pn as aa,B as ab,Sn as ac,Tn as ad,qn as ae,Ee as af,Gn as ag,Pe as ah,di as ai,Un as aj,Qn as ak,Fe as al,pi as am,ti as an,Rn as ao,Tt as ap,nt as aq,si as ar,jt as as,mi as b,xi as c,bi as d,ot as e,Ot as f,yi as g,L as h,ui as i,ei as j,Q as k,Ln as l,se as m,ri as n,Ue as o,ci as p,Yn as q,ze as r,Kn as s,Zn as t,le as u,on as v,V as w,ft as x,an as y,H as z};
